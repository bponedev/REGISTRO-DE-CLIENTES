{% extends "base.html" %}
{% block content %}
<h2>Usuários</h2>

<a href="{{ url_for('admin_users_create') }}" class="btn">Novo Usuário</a>

<table class="table">
    <thead>
        <tr>
            <th>ID</th>
            <th>Nome</th>
            <th>Usuário</th>
            <th>Perfil</th>
            <th>Escritórios</th>
            <th>Status</th>
            <th>Ações</th>
        </tr>
    </thead>
    <tbody>

    {% for u in users %}
        <tr>
            <td>{{ u.id }}</td>
            <td>{{ u.name }}</td>
            <td>{{ u.username }}</td>
            <td>{{ u.role }}</td>
            <td>{{ u.offices }}</td>
            <td>{{ "Ativo" if u.active else "Inativo" }}</td>

            <td>
                <a href="{{ url_for('admin_users_edit', user_id=u.id) }}" class="btn small">Editar</a>
                <a href="{{ url_for('admin_users_offices', user_id=u.id) }}" class="btn small">Escritórios</a>
                <a href="{{ url_for('admin_users_reset', user_id=u.id) }}" class="btn small">Resetar Senha</a>

                {% if u.active %}
                    <a href="{{ url_for('admin_users_deactivate', user_id=u.id) }}" class="btn small danger">Desativar</a>
                {% else %}
                    <a href="{{ url_for('admin_users_activate', user_id=u.id) }}" class="btn small">Ativar</a>
                {% endif %}

                <a href="{{ url_for('admin_users_delete', user_id=u.id) }}" class="btn small danger">Excluir</a>
            </td>
        </tr>
    {% endfor %}

    </tbody>
</table>
{% endblock %}
